<!DOCTYPE html>
<html lang="zh-cn">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      body,
      dl,
      dt,
      dd,
      p {
        margin: 0;
        padding: 0;
      }
      body {
        font-family: Tahoma;
        font-size: 12px;
      }
      label,
      input,
      a {
        vertical-align: middle;
      }
      label {
        padding: 0 10px 0 5px;
      }
      a {
        color: #09f;
        text-decoration: none;
      }
      a:hover {
        color: red;
      }
      dl {
        width: 120px;
        margin: 10px auto;
        padding: 10px 5px;
        border: 1px solid #666;
        border-radius: 5px;
        background: #fafafa;
      }
      dt {
        padding-bottom: 10px;
        border-bottom: 1px solid #666;
      }
      dt label {
        font-weight: 700;
      }
      p {
        margin-top: 10px;
      }
    </style>
  </head>
  <body>
    <dl>
      <dt>
        <input type="checkbox" id="checkAll" />
        <label>全选</label>
        <a href="javascript:;">反选</a>
      </dt>
      <dd>
        <p>
          <input type="checkbox" name="item" />
          <label>选项（一）</label>
        </p>
        <p>
          <input type="checkbox" name="item" />
          <label>选项（二）</label>
        </p>
        <p>
          <input type="checkbox" name="item" />
          <label>选项（三）</label>
        </p>
        <p>
          <input type="checkbox" name="item" />
          <label>选项（四）</label>
        </p>
        <p>
          <input type="checkbox" name="item" />
          <label>选项（五）</label>
        </p>
        <p>
          <input type="checkbox" name="item" />
          <label>选项（六）</label>
        </p>
        <p>
          <input type="checkbox" name="item" />
          <label>选项（七）</label>
        </p>
        <p>
          <input type="checkbox" name="item" />
          <label>选项（八）</label>
        </p>
        <p>
          <input type="checkbox" name="item" />
          <label>选项（九）</label>
        </p>
        <p>
          <input type="checkbox" name="item" />
          <label>选项（十）</label>
        </p>
      </dd>
    </dl>
    <center>
      1、切换全选/全不选文字；
      <br />
      <br />
      2、根据选中个数更新全选框状态；
    </center>
    <script>
      //找对象
      var dd_p = document.querySelectorAll("dd p");
      //当全选被点击
      checkAll.onclick = function (e) {
        //遍历dd中所有的checkbox 并根据checkAll的情况进行赋值
        for (var i = 0; i < dd_p.length; i++) {
          dd_p[i].querySelector("input").checked = checkAll.checked ? 1 : 0;
        }
      };
      //反选按钮
      document.querySelector("dt a").onclick = function (e) {
        //遍历dd中的所有checkbox 取反
        for (var k = 0; k < dd_p.length; k++) {
          dd_p[k].querySelector("input").checked = dd_p[k].querySelector("input").checked? 0 : 1;
        }
      };
      //每次点击时检测dd中有多少的checkbox被选中
      window.onclick = function (e) {
        //储存checkbox选中的数量
        var x = 0;
        //检测被选中多少个
        for (var j = 0; j < dd_p.length; j++) {
          x += dd_p[j].querySelector("input").checked;
        }
        //判断
        if (x === dd_p.length) {
          //全部选中执行
          checkAll.checked = 1;
          checkAll.nextSibling.nextSibling.innerHTML = "全不选";
        } else {
          //未全部选中执行
          checkAll.checked = 0;
          checkAll.nextSibling.nextSibling.innerHTML = "全选";
        }
      };
    </script>
  </body>
</html>
