<!DOCTYPE html>
<html lang="zh-cn">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      @font-face {
        font-family: "webfont";
        font-display: swap;
        src: url("https://at.alicdn.com/t/webfont_ta10f4h5x7.eot"); /* IE9*/
        src: url("https://at.alicdn.com/t/webfont_ta10f4h5x7.eot?#iefix")
            format("embedded-opentype"),
          /* IE6-IE8 */ url("https://at.alicdn.com/t/webfont_ta10f4h5x7.woff2")
            format("woff2"),
          url("https://at.alicdn.com/t/webfont_ta10f4h5x7.woff") format("woff"),
          /* chrome、firefox */
            url("https://at.alicdn.com/t/webfont_ta10f4h5x7.ttf")
            format("truetype"),
          /* chrome、firefox、opera、Safari, Android, iOS 4.2+*/
            url("https://at.alicdn.com/t/webfont_ta10f4h5x7.svg#站酷高端黑")
            format("svg"); /* iOS 4.1- */
      }
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      div > img {
        width: 100%;
        float: left;
        height: 1000px;
      }
      div.nav {
        position: fixed;
        right: 0;
        top: 40px;
        width: 200px;
        height: 900px;
        background-color: #fff;
        border-radius: 14px;
      }
      ul {
        border-radius: 14px;
        overflow: hidden;
        box-shadow: 10px 10px 50px #888888;
      }
      ul > li {
        list-style: none;
        height: 100px;
        line-height: 100px;
        text-align: center;
        border-bottom: 1px dashed gray;
        font-size: 24px;
        font-family: "webfont" !important;
      }
      ul > li:last-child {
        border: none;
      }
      ul > li:hover {
        cursor: pointer;
      }
      .current {
        background-color: orange;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <img src="./imgs/111.png" alt="" />
      <img src="./imgs/222.png" alt="" />
      <img src="./imgs/333.png" alt="" />
      <img src="./imgs/444.png" alt="" />
      <img src="./imgs/555.png" alt="" />
      <img src="./imgs/666.png" alt="" />
      <img src="./imgs/777.png" alt="" />
      <img src="./imgs/888.png" alt="" />
      <img src="./imgs/999.png" style="margin-bottom: 30px;" alt="" />
    </div>
    <div class="nav">
      <ul id="aa">
        <li index="0" class="current">王一博</li>
        <li index="1">功能亮点</li>
        <li index="2">一刻满血</li>
        <li index="3">神仙高配</li>
        <li index="4">金刚电量</li>
        <li index="5">高刷新</li>
        <li index="6">高触控</li>
        <li index="7">超窄边</li>
        <li index="8">JBL音质</li>
      </ul>
    </div>
  </body>
  <script>
    //找对象
    var li = document.querySelectorAll("#aa li");
    //当页面滚动时
    window.onscroll = function () {
      //获取滚动条位置
      var x = document.documentElement.scrollTop;
      //取整 来确定高亮导航栏中哪个项
      x = parseInt(x / 1000);
      //将数值传给titles方法
      titles(x);
    };
    //当导航栏被点击时
    aa.onclick = function (e) {
      //获取被点击的项的index的值
      var x = e.target.getAttribute("index");
      //计算当前页面位置和计划位置的距离以及需要向哪个方向滚动
      var y = document.documentElement.scrollTop - x * 1000;
      //创建定时器
      var z = setInterval(function () {
        //判断是否需要向下滚动
        if (y < 0) {
          //此时if中的两个条件都是负数 所以用">"
          //parseInt(y / 1000) * 20可以根据页面与目标的距离调整每次变化的数值
          //可以将document.documentElement.scrollTop储存在一个变量里面 用eval方法来调用
          if (document.documentElement.scrollTop - x * 1000 > parseInt(y / 1000) * 20) {
            //当页面的距离不足一次变化时 将页面位置设置为目标值
            document.documentElement.scrollTop = x * 1000;
            //停止定时器
            clearInterval(z);
          }else{
            //页面还需要继续调整时执行
            document.documentElement.scrollTop -= parseInt(y / 1000) * 20;
          }
        } else {
          if (document.documentElement.scrollTop - x * 1000 < parseInt(y / 1000) * 20) {
            document.documentElement.scrollTop = x * 1000;
            clearInterval(z);
          }else{
            document.documentElement.scrollTop -= parseInt(y / 1000) * 20;
          }
        }
      }, 1);
    };
    //高亮导航栏方法
    function titles(x) {
      //清楚导航栏所有的class
      for (var i = 0; i < li.length; i++) {
        li[i].removeAttribute("class");
      }
      //给需要高亮的项设置class
      li[x].setAttribute("class", "current");
    }
  </script>
</html>
